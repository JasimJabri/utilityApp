(function(t){function e(e){for(var a,s,o=e[0],c=e[1],l=e[2],u=0,d=[];u<o.length;u++)s=o[u],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&d.push(i[s][0]),i[s]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);p&&p(e);while(d.length)d.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],a=!0,s=1;s<n.length;s++){var c=n[s];0!==i[c]&&(a=!1)}a&&(r.splice(e--,1),t=o(o.s=n[0]))}return t}var a={},i={1:0},r=[];function s(t){return o.p+"js/"+({}[t]||t)+"."+{2:"7268fc6a"}[t]+".js"}function o(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.e=function(t){var e=[],n=i[t];if(0!==n)if(n)e.push(n[2]);else{var a=new Promise((function(e,a){n=i[t]=[e,a]}));e.push(n[2]=a);var r,c=document.createElement("script");c.charset="utf-8",c.timeout=120,o.nc&&c.setAttribute("nonce",o.nc),c.src=s(t);var l=new Error;r=function(e){c.onerror=c.onload=null,clearTimeout(u);var n=i[t];if(0!==n){if(n){var a=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src;l.message="Loading chunk "+t+" failed.\n("+a+": "+r+")",l.name="ChunkLoadError",l.type=a,l.request=r,n[1](l)}i[t]=void 0}};var u=setTimeout((function(){r({type:"timeout",target:c})}),12e4);c.onerror=c.onload=r,document.head.appendChild(c)}return Promise.all(e)},o.m=t,o.c=a,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(n,a,function(e){return t[e]}.bind(null,a));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var p=l;r.push([0,0]),n()})({0:function(t,e,n){t.exports=n("2f39")},"0047":function(t,e,n){},"0248":function(t,e,n){"use strict";var a=n("0931"),i=n.n(a);i.a},"0931":function(t,e,n){},"0a42":function(t,e,n){},1139:function(t,e,n){"use strict";var a=n("0a42"),i=n.n(a);i.a},1757:function(t,e,n){"use strict";(function(t){n("551c"),n("06db");var a=n("967e"),i=n.n(a),r=(n("7f7f"),n("96cf"),n("fa84")),s=n.n(r),o=n("17e1");n("4be7");e["a"]={data:function(){return{viewPropertyDialog:!1,properties:[],units:[],user:"",selectedProperty:[],tempPropertyName:"",readOnly:!0,propertyNames:[],columns:[{name:"desc",required:!0,label:"Unit Name",align:"left",field:"unitName",sortable:!0,classes:"my-class"},{name:"uscn",required:!0,label:"Unique Service No.",align:"left",field:"uscn",sortable:!0,classes:"my-class"}]}},created:function(){this.onInit()},methods:{onInit:function(){var t=this;return s()(i.a.mark((function e(){var n;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$q.loading.show(),t.properties.length=0,t.user=t.$q.localStorage.getItem("user"),e.next=5,o["a"].collection("utility_manager/".concat(t.user,"/properties")).get();case 5:n=e.sent,n.docs.map((function(e){var n=[],a=[],i=o["a"].collection("utility_manager/".concat(t.user,"/properties/").concat(e.id,"/units")).get();i.then((function(t){t.forEach((function(t){n.push(t.data())}))}));var r=o["a"].collection("utility_manager/".concat(t.user,"/properties/").concat(e.id,"/water")).get();r.then((function(t){t.forEach((function(t){a.push(t.data())}))})),t.properties.push({name:e.data().name,propertyId:e.id,address:e.data().address,units:n,water:a}),t.propertyNames.push({name:e.data().name})})),t.$q.loading.hide();case 8:case"end":return e.stop()}}),e)})))()},checkProperty:function(t){if(t=t.trim(),t.toLowerCase()==this.tempPropertyName.toLowerCase())return!0;var e=this.propertyNames.some((function(e){return e.name.toLowerCase()===t.toLowerCase()}));return!e},viewProperty:function(t){this.viewPropertyDialog=!0,this.selectedProperty=t,this.tempPropertyName=t.name},saveProperty:function(t,e){var n=this;if("EDIT"===t)this.readOnly=!1;else if("SAVE"===t){this.$q.loading.show();o["a"].collection("utility_manager/".concat(this.user,"/properties")).doc(this.selectedProperty.propertyId).update({name:this.selectedProperty.name.toLowerCase(),address:this.selectedProperty.address.toLowerCase()}).then((function(t){n.$q.notify({message:"".concat(n.selectedProperty.name," successfully updated")}),n.onInit(),n.viewPropertyDialog=!1,n.$q.loading.hide()})).catch((function(t){console.log(t),n.$q.loading.hide()}))}},deleteProperty:function(){var t=this;return s()(i.a.mark((function e(){return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:"utility_manager/".concat(t.user,"/properties/").concat(t.selectedProperty.propertyId,"/units"),t.$q.dialog({title:"Confirm",message:"Would you like to delete ".concat(t.selectedProperty.name.toUpperCase(),"?"),cancel:!0,persistent:!0}).onOk((function(){t.$q.loading.show(),t.deleteAll()}));case 2:case"end":return e.stop()}}),e)})))()},onDialogHide:function(){this.readOnly=!0,this.selectedProperty=[]},deleteAll:function(){var t=this;return s()(i.a.mark((function e(){var n,a;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n="utility_manager/".concat(t.user,"/properties/").concat(t.selectedProperty.propertyId,"/units"),a="utility_manager/".concat(t.user,"/properties/").concat(t.selectedProperty.propertyId,"/water"),e.next=4,t.deleteCollection(o["a"],n,5);case 4:return e.next=6,t.deleteCollection(o["a"],a,5);case 6:o["a"].collection("utility_manager/".concat(t.user,"/properties")).doc(t.selectedProperty.propertyId).delete().then((function(e){t.onInit(),t.viewPropertyDialog=!1,t.$q.loading.hide(),t.$q.notify({message:"".concat(t.selectedProperty.name.toUpperCase()," deleted successfully"),type:"danger"})})).catch((function(e){t.$q.loading.hide(),console.log(e)}));case 7:case"end":return e.stop()}}),e)})))()},deleteCollection:function(t,e,n){var a=this,i=t.collection(e),r=i.orderBy("__name__").limit(n);return new Promise((function(e,i){a.deleteQueryBatch(t,r,n,e,i)}))},deleteQueryBatch:function(e,n,a,i,r){var s=this;n.get().then((function(t){if(0==t.size)return 0;var n=e.batch();return t.docs.forEach((function(t){n.delete(t.ref)})),n.commit().then((function(){return t.size}))})).then((function(o){0!==o?t.nextTick((function(){s.deleteQueryBatch(e,n,a,i,r)})):i()})).catch(r)}}}}).call(this,n("4362"))},"17e1":function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var a=n("2b0e"),i=n("0ff2"),r=n("8aa5"),s=n.n(r);n("e71f");a["a"].use(i["a"]);var o={apiKey:"AIzaSyADqYX3u-yqHpS-jpln8vMtIv-NZYVBx1o",authDomain:"bills-1234.firebaseapp.com",databaseURL:"https://bills-1234.firebaseio.com",projectId:"bills-1234",storageBucket:"bills-1234.appspot.com",messagingSenderId:"693484721282"};s.a.initializeApp(o);var c=s.a.firestore()},"2f39":function(t,e,n){"use strict";n.r(e);var a=n("967e"),i=n.n(a),r=(n("96cf"),n("fa84")),s=n.n(r),o=(n("7d6e"),n("e54f"),n("985d"),n("0047"),n("2b0e")),c=n("1f91"),l=n("42d2"),u=n("b05d"),p=n("f508"),d=n("18d6"),m=n("a639"),f=n("2a19"),h=n("436b");o["a"].use(u["a"],{config:{},lang:c["a"],iconSet:l["a"],plugins:{Loading:p["a"],LocalStorage:d["a"],SessionStorage:m["a"],Notify:f["a"],Dialog:h["a"]}});var y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"q-app"}},[n("router-view")],1)},g=[],v={name:"App"},b=v,w=n("2877"),q=Object(w["a"])(b,y,g,!1,null,null,null),x=q.exports,S=(n("6762"),n("8c4f")),N=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-layout",{attrs:{view:"hHh Lpr lff"}},[n("q-header",{staticClass:"bg-black glossy",attrs:{elevated:""}},[n("q-toolbar",[n("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"menu"},on:{click:function(e){t.drawer=!t.drawer}}}),n("q-toolbar-title",{staticStyle:{"font-size":"20px","text-transform":"uppercase","letter-spacing":"1px","font-weight":"500","word-spacing":"2px"}},[t._v(t._s(this.$route.meta.title))]),t.$route.meta.buttons?n("q-btn",{attrs:{to:t.$route.meta.buttons.path,icon:t.$route.meta.buttons.icon,label:t.$route.meta.buttons.label}}):t._e()],1)],1),n("q-drawer",{attrs:{"show-if-above":"",width:200,breakpoint:500,bordered:"","content-class":"bg-grey-3"},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[n("q-scroll-area",{staticClass:"fit"},[t._l(t.menuList,(function(e,a){return n("q-list",{key:a},[n("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:"",to:e.path}},[n("q-item-section",{attrs:{avatar:""}},[n("q-icon",{attrs:{name:e.icon}})],1),n("q-item-section",[t._v(t._s(e.label))])],1),e.separator?n("q-separator"):t._e()],1)})),n("q-list",{staticClass:"fit"},[n("q-item",{attrs:{clickable:""},nativeOn:{click:function(e){return t.logout()}}},[n("q-item-section",{attrs:{avatar:""}},[n("q-icon",{attrs:{name:"exit_to_app"}})],1),n("q-item-section",[t._v("\n          Logout\n        ")])],1)],1)],2)],1),n("q-page-container",{staticClass:"container"},[n("router-view")],1)],1)},k=[],_=(n("a481"),n("59ca")),U=n.n(_),$=(n("ea7b"),{name:"MyLayout",data:function(){return{drawer:!1,left:!1,menuList:P}},created:function(){this.head_title=this.$route.fullPath.slice(1).toUpperCase()},methods:{logout:function(){var t=this;this.$q.dialog({title:"Logout",message:"Are you sure?",ok:"Ok",cancel:!0,persistent:!0}).onOk((function(){U.a.auth().signOut().then((function(){t.$q.localStorage.set("isLoggedIn",!1),t.$q.localStorage.set("user",""),t.$q.notify({message:"User Logged out successfully",type:"negative",timeout:800}),t.$router.replace("/login")}))}))}}}),P=[{icon:"account_balance",label:"Bills",path:"/bills",separator:!0},{icon:"home_work",label:"Properties",path:"/properties",separator:!1},{icon:"tab",label:"Units",path:"/units",separator:!1},{icon:"sports_volleyball",label:"Water",path:"/water",separator:!1}],C=$,I=(n("a6e2"),n("eebe")),Q=n.n(I),D=n("4d5a"),E=n("e359"),j=n("65c6"),O=n("9c40"),L=n("6ac5"),z=n("9404"),A=n("4983"),R=n("1c1c"),B=n("66e5"),M=n("4074"),W=n("0016"),T=n("eb85"),F=n("09e3"),H=n("714f"),V=Object(w["a"])(C,N,k,!1,null,"07c8ffd4",null),Y=V.exports;Q()(V,"components",{QLayout:D["a"],QHeader:E["a"],QToolbar:j["a"],QBtn:O["a"],QToolbarTitle:L["a"],QDrawer:z["a"],QScrollArea:A["a"],QList:R["a"],QItem:B["a"],QItemSection:M["a"],QIcon:W["a"],QSeparator:T["a"],QPageContainer:F["a"]}),Q()(V,"directives",{Ripple:H["a"]});var J=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-layout",{attrs:{view:"lHh Lpr lFf"}},[n("q-page-container",{staticClass:"container"},[n("router-view")],1)],1)},K=[],X={name:"LoginLayout"},Z=X,G=(n("7e01"),Object(w["a"])(Z,J,K,!1,null,"498e9c84",null)),tt=G.exports;Q()(G,"components",{QLayout:D["a"],QPageContainer:F["a"]});var et=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-page",{staticClass:"row justify-center content-start",staticStyle:{width:"100%"}},[t._l(t.properties,(function(e,a){return n("q-list",{key:a,staticClass:"bg-grey-10 text-white shadow-2 rounded-borders",staticStyle:{"max-width":"400px",width:"100%",margin:"15px"}},[n("q-list",[n("q-item",{staticClass:"bg-black",staticStyle:{"text-align":"center","font-size":"22px","font-weight":"bold","letter-spacing":"2px","text-transform":"uppercase"}},[n("q-item-section",[t._v(t._s(e.propertyName))])],1),n("q-separator",{attrs:{dark:""}}),n("q-item",{staticClass:"bg-grey-9",staticStyle:{"font-size":"18px","font-weight":"400","text-align":"center","letter-spacing":"3px"}},[n("q-item-section",[t._v("Electricity Bills")])],1),n("q-separator",{attrs:{dark:""}}),t._l(e.units,(function(e,i){return n("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:i,staticStyle:{"font-size":"18px",cursor:"pointer"},nativeOn:{click:function(n){return t.viewUnit(e,i,a)}}},[n("q-item-section",{attrs:{avatar:""}},[n("q-icon",{attrs:{name:"emoji_objects"}})],1),n("q-item-section",{staticStyle:{"text-transform":"capitalize"}},[t._v(t._s(e.tenantName))]),n("q-item-section",{staticStyle:{"text-align":"end"}},[t._v("₹ "+t._s(e.amount))])],1)})),n("q-separator",{attrs:{dark:""}}),n("q-item",{staticClass:"bg-grey-9",staticStyle:{"font-size":"18px","font-weight":"400","text-align":"center","letter-spacing":"2px"}},[n("q-item-section",[t._v("Water Bills")])],1),n("q-separator",{attrs:{dark:""}}),t._l(e.water,(function(e,a){return n("q-item",{key:"w"+a,staticStyle:{"font-size":"18px"}},[n("q-item-section",{attrs:{avatar:""}},[n("q-icon",{attrs:{name:"waves"}})],1),n("q-item-section",[t._v(t._s(e.canNumber))]),n("q-item-section",{staticStyle:{"text-align":"end"}},[t._v("₹ "+t._s(e.arrears))])],1)})),0==e.water.length?n("q-item",{staticStyle:{"text-align":"center"}},[n("q-item-section",[t._v("\n          No data available!\n        ")])],1):t._e()],2)],1)})),n("q-dialog",{attrs:{persistent:"","transition-show":"slide-up","transition-hide":"slide-down"},model:{value:t.viewUnitModal,callback:function(e){t.viewUnitModal=e},expression:"viewUnitModal"}},[n("q-list",{staticClass:"bg-grey-2",staticStyle:{padding:"2px",width:"95vw",height:"95vh","max-width":"700px","max-height":"750px"}},[n("q-item",{staticClass:"bg-black text-white  rounded-borders q-mb-sm",staticStyle:{"text-align":"center","font-size":"22px","font-weight":"bold","letter-spacing":"3px","text-transform":"uppercase"}},[n("q-item-section",[t._v(" "+t._s(t.viewUnitData.tenantName))]),n("div",{on:{click:function(e){return t.saveUnit(e.srcElement.innerText,t.viewUnitData)}}},[n("q-btn",{attrs:{outline:"",color:t.readOnly?"red":"green"}},[t._v(t._s(t.readOnly?"edit name":"save name"))])],1)],1),n("q-item",[n("q-input",{staticStyle:{width:"100%","text-transform":"capitalize"},attrs:{standout:"",hint:"Tenant Name",type:"text",readonly:t.readOnly},scopedSlots:t._u([{key:"before",fn:function(){return[n("q-icon",{staticStyle:{"font-size":"2rem",color:"black"},attrs:{name:"person"}})]},proxy:!0}]),model:{value:t.viewUnitData.tenantName,callback:function(e){t.$set(t.viewUnitData,"tenantName",e)},expression:"viewUnitData.tenantName"}})],1),n("q-item",[n("q-input",{staticStyle:{width:"100%","text-transform":"capitalize"},attrs:{standout:"",type:"text",readonly:!0,hint:"Unit Name"},scopedSlots:t._u([{key:"before",fn:function(){return[n("q-icon",{staticStyle:{"font-size":"2rem",color:"black"},attrs:{name:"mail"}})]},proxy:!0}]),model:{value:t.viewUnitData.unitName,callback:function(e){t.$set(t.viewUnitData,"unitName",e)},expression:"viewUnitData.unitName"}})],1),n("q-item",[n("q-input",{staticStyle:{width:"100%"},attrs:{filled:"",hint:"Unique Service Number",type:"text",readonly:!0},scopedSlots:t._u([{key:"before",fn:function(){return[n("q-icon",{staticStyle:{"font-size":"2rem",color:"black"},attrs:{name:"whatshot"}})]},proxy:!0},{key:"append",fn:function(){return[n("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"content_copy"},on:{click:function(e){return t.clipboard(t.viewUnitData.uscn)}}})]},proxy:!0}]),model:{value:t.viewUnitData.uscn,callback:function(e){t.$set(t.viewUnitData,"uscn",e)},expression:"viewUnitData.uscn"}})],1),n("q-item",[n("q-input",{staticStyle:{width:"100%"},attrs:{filled:"",hint:"Service Number",type:"text",readonly:!0},scopedSlots:t._u([{key:"before",fn:function(){return[n("q-icon",{staticStyle:{"font-size":"2rem",color:"black"},attrs:{name:"all_inclusive"}})]},proxy:!0}]),model:{value:t.viewUnitData.serviceno,callback:function(e){t.$set(t.viewUnitData,"serviceno",e)},expression:"viewUnitData.serviceno"}})],1),n("q-item",[n("q-input",{staticStyle:{width:"100%"},attrs:{filled:"",hint:"Due Date",type:"text",readonly:!0},scopedSlots:t._u([{key:"before",fn:function(){return[n("q-icon",{staticStyle:{"font-size":"2rem",color:"black"},attrs:{name:"warning"}})]},proxy:!0}]),model:{value:t.viewUnitData.dueDate,callback:function(e){t.$set(t.viewUnitData,"dueDate",e)},expression:"viewUnitData.dueDate"}})],1),n("q-item",[n("q-input",{staticStyle:{width:"100%"},attrs:{filled:"",hint:"Amount",type:"text",readonly:!0},scopedSlots:t._u([{key:"before",fn:function(){return[n("q-icon",{staticStyle:{"font-size":"2rem",color:"black"},attrs:{name:"warning"}})]},proxy:!0}]),model:{value:t.viewUnitData.amount,callback:function(e){t.$set(t.viewUnitData,"amount",e)},expression:"viewUnitData.amount"}})],1),n("q-item",[n("q-input",{staticStyle:{width:"100%"},attrs:{filled:"",hint:"Last Updated",type:"text",readonly:!0},scopedSlots:t._u([{key:"before",fn:function(){return[n("q-icon",{staticStyle:{"font-size":"2rem",color:"black"},attrs:{name:"warning"}})]},proxy:!0}]),model:{value:t.viewUnitData.lastUpdated,callback:function(e){t.$set(t.viewUnitData,"lastUpdated",e)},expression:"viewUnitData.lastUpdated"}})],1),n("div",{staticClass:"row justify-around q-py-sm"},[n("q-btn",{staticStyle:{width:"50%","font-size":"1rem","letter-spacing":"5px"},attrs:{color:"red"},on:{click:function(e){return t.closeViewModal()}}},[t._v("Cancel")])],1)],1)],1)],2)},nt=[],at=(n("ac6a"),n("cadf"),n("06db"),n("456d"),n("f751"),n("7f7f"),n("17e1")),it=n("cdde"),rt={name:"PageIndex",data:function(){return{properties:[],units:[],water:[],viewUnitModal:!1,addUnitModal:!1,readOnly:!0,viewUnitData:{},addUnitData:[],originalUnitData:{},maximizedToggle:!0}},created:function(){var t=this;this.properties.length=0;var e=this.$q.localStorage.getItem("user"),n=(this.$q.localStorage.getItem("isLoggedIn"),at["a"].collection("utility_manager/".concat(e,"/properties")));n.onSnapshot((function(n){t.properties.length=0,n.forEach((function(n){var a=at["a"].collection("utility_manager/".concat(e,"/properties/").concat(n.id,"/units")),i=[],r=[];a.onSnapshot({includeMetadataChanges:!0},(function(t){i.length=0,t.forEach((function(t){i.push(t.data())}))}));var s=at["a"].collection("utility_manager/".concat(e,"/properties/").concat(n.id,"/water"));s.onSnapshot({includeMetadataChanges:!0},(function(t){r.length=0,t.forEach((function(t){r.push(t.data())}))})),t.properties.push({propertyName:n.data().name.toUpperCase(),units:i,water:r})}))}))},methods:{viewUnit:function(t,e,n){this.viewUnitModal=!0,this.originalUnitData=Object.assign({},t),this.originalUnitData.uIndex=e,this.originalUnitData.pIndex=n,this.viewUnitData=t},saveUnit:function(t,e){var n=this;if("EDIT NAME"===t)this.readOnly=!1;else if("SAVE NAME"===t){this.$q.loading.show(),delete e["pIndex"],delete e["uIndex"];var a=Object.keys(e),i={};a.map((function(t){var n=e[t];i[t]=n}));var r=at["a"].collection("utility_manager/".concat(e.userId,"/properties/").concat(e.propertyId,"/units")).doc("".concat(e.unitId));r.update(i).then((function(t){n.viewUnitModal=!1,n.$q.notify({message:"".concat(i.tenantName," successfully updated"),type:"positive"}),n.readOnly=!0,n.$q.loading.hide()})).catch((function(t){console.log(t),n.$q.notify({message:"Error Loading Data",type:"negative"}),n.$q.loading.hide()}))}},closeViewModal:function(){this.viewUnitModal=!1,this.readOnly=!0;var t=this.originalUnitData.pIndex,e=this.originalUnitData.uIndex;this.properties[t].units[e]=this.originalUnitData},modalClosed:function(){this.$q.loading.hide(),this.readOnly=!0},clipboard:function(t){var e=this;Object(it["a"])(t).then((function(){e.$q.notify({message:"".concat(t," copied to clipboard"),type:"positive"})})).catch((function(){console.log("Error")}))}}},st=rt,ot=n("9989"),ct=n("24e8"),lt=n("27f9"),ut=Object(w["a"])(st,et,nt,!1,null,null,null),pt=ut.exports;Q()(ut,"components",{QPage:ot["a"],QList:R["a"],QItem:B["a"],QItemSection:M["a"],QSeparator:T["a"],QIcon:W["a"],QDialog:ct["a"],QBtn:O["a"],QInput:lt["a"]}),Q()(ut,"directives",{Ripple:H["a"]});var dt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-page",{attrs:{padding:""}},[n("div",{staticClass:"row wrap justify-center items-center content-center",staticStyle:{"min-height":"10vh","text-align":"center","font-size":"1.2em"}},[0==t.properties.length?n("div",[t._v("\n      No properties listed."),n("br"),t._v(" Please add new property by clicking on the '+' sign, located at the top right hand corner of this screen.\n    ")]):t._e()]),n("div",{staticClass:"row justify-around",staticStyle:{"min-height":"400px"}},[t._l(t.properties,(function(e,a){return n("q-card",{key:a,staticClass:"bg-yellow-1 text-tertiary",staticStyle:{"max-width":"800px","max-height":"150px","min-width":"300px",cursor:"pointer",margin:"20px"},attrs:{squared:"",inline:""},nativeOn:{click:function(n){return t.viewProperty(e)}}},[n("q-card-section",{staticStyle:{"text-align":"center",background:"black",color:"white","font-weight":"800","text-transform":"uppercase","letter-spacing":"2px","word-spacing":"3px","font-size":"20px"}},[t._v(t._s(e.name))]),n("q-separator"),n("q-card-section",{staticClass:"row justify-around"},[n("q-chip",{staticClass:"bg-info text-brown-10",attrs:{detail:"",square:"",icon:"home"}},[t._v(t._s(e.units.length))]),n("q-chip",{staticClass:"bg-light-blue text-black",attrs:{detail:"",square:"",icon:"opacity"}},[t._v(t._s(e.water.length))]),n("q-chip",{staticClass:"bg-negative text-orange-2",attrs:{detail:"",square:"",icon:"offline_bolt"}},[t._v(t._s(e.units.length))])],1)],1)})),n("q-dialog",{attrs:{persistent:"","transition-show":"slide-up","transition-hide":"slide-down"},on:{hide:function(e){return t.onDialogHide()}},model:{value:t.viewPropertyDialog,callback:function(e){t.viewPropertyDialog=e},expression:"viewPropertyDialog"}},[n("q-list",{staticClass:"bg-grey-2",staticStyle:{padding:"10px 10px 20px 10px","max-width":"700px",width:"100%"}},[n("q-form",[n("q-item",{staticClass:"bg-black text-white",staticStyle:{"text-align":"center","font-size":"22px","font-weight":"bold","letter-spacing":"3px","text-transform":"uppercase"}},[n("q-item-section",[t._v(t._s(t.selectedProperty.name))]),n("div",{on:{click:function(e){return t.saveProperty(e.srcElement.innerText,t.selectedProperty)}}},[n("q-btn",{attrs:{outline:"",color:t.readOnly?"red":"green"}},[t._v(t._s(t.readOnly?"edit":"save"))])],1)],1),n("br"),n("q-item",[n("q-input",{staticStyle:{width:"100%","text-transform":"capitalize"},attrs:{outlined:"",hint:"Property Name",type:"text",readonly:t.readOnly,rules:[function(t){return!!t||"* Required"},function(t){return t.length>=3||"Please use minimum 3 characters"},function(t){return t.length<=16||"Please use maximum 16 characters"},function(e){return t.checkProperty(e)||"Name already in use"}]},scopedSlots:t._u([{key:"before",fn:function(){return[n("q-icon",{staticStyle:{"font-size":"2rem",color:"black"},attrs:{name:"home"}})]},proxy:!0}]),model:{value:t.selectedProperty.name,callback:function(e){t.$set(t.selectedProperty,"name",e)},expression:"selectedProperty.name"}})],1),n("q-item",[n("q-input",{staticStyle:{width:"100%","text-transform":"capitalize"},attrs:{outlined:"",hint:"Address",type:"text",readonly:t.readOnly},scopedSlots:t._u([{key:"before",fn:function(){return[n("q-icon",{staticStyle:{"font-size":"2rem",color:"black"},attrs:{name:"home"}})]},proxy:!0}]),model:{value:t.selectedProperty.address,callback:function(e){t.$set(t.selectedProperty,"address",e)},expression:"selectedProperty.address"}})],1),n("br"),n("q-table",{staticClass:"unit_table",staticStyle:{"text-transform":"capitalize"},attrs:{"hide-title":"",data:t.selectedProperty.units,columns:t.columns,"row-key":"name","hide-bottom":""}}),n("br"),n("q-item",{staticClass:"row justify-around"},[n("q-btn",{attrs:{color:"negative",label:"Delete"},on:{click:function(e){return t.deleteProperty()}}}),n("q-btn",{attrs:{color:"primary",label:"Cancel"},on:{click:function(e){t.viewPropertyDialog=!t.viewPropertyDialog}}})],1)],1)],1)],1)],2)])},mt=[],ft=n("1757"),ht=ft["a"],yt=(n("0248"),n("f09f")),gt=n("a370"),vt=n("b047"),bt=n("0378"),wt=n("eaac"),qt=Object(w["a"])(ht,dt,mt,!1,null,null,null),xt=qt.exports;Q()(qt,"components",{QPage:ot["a"],QCard:yt["a"],QCardSection:gt["a"],QSeparator:T["a"],QChip:vt["a"],QDialog:ct["a"],QList:R["a"],QForm:bt["a"],QItem:B["a"],QItemSection:M["a"],QBtn:O["a"],QInput:lt["a"],QIcon:W["a"],QTable:wt["a"]});var St=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"q-pa-md doc-container"},[n("div",{staticClass:"row justify-center"},[n("div",{staticClass:"col-4"},[n("q-select",{attrs:{outlined:"",label:"Please Select Property",options:t.properties,"option-value":"id","option-label":"name","emit-value":"","map-options":""},on:{input:function(e){return t.showProperty(t.model)}},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})],1)]),n("br"),n("br"),n("div",{staticClass:"row justify-center"},[null!=t.model?n("q-list",[n("q-item",{staticClass:"row justify-between",staticStyle:{width:"400px","border-color":"lightgrey","border-style":"solid","border-width":"2px"}},[n("div",{staticStyle:{"text-align":"center",width:"300px"}},[t._v("Unit Name\n         ")]),n("div",{staticStyle:{"text-align":"center",width:"100px"}},[t._v("Edit")])]),t._l(t.units,(function(e){return n("q-item",{key:e.unitId,staticClass:"row justify-between",staticStyle:{width:"400px",background:"lightgrey"}},[n("div",{staticStyle:{"text-align":"center",width:"300px","text-transform":"capitalize"}},[t._v("\n         "+t._s(e.unitName)+"\n         ")]),n("q-btn",{staticStyle:{"text-align":"center",width:"100px"},on:{click:function(n){return t.editUnit(e)}}},[t._v("Edit")])],1)}))],2):t._e()],1)])},Nt=[],kt=(n("4be7"),n("3022"),{data:function(){return{model:null,properties:[],units:[]}},created:function(){this.onInit()},methods:{onInit:function(){var t=this;return s()(i.a.mark((function e(){var n;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$q.loading.show(),t.properties.length=0,t.user=t.$q.localStorage.getItem("user"),e.next=5,at["a"].collection("utility_manager/".concat(t.user,"/properties")).get().catch((function(e){t.$q.loading.hide(),t.$q.notify(e.message),console.log(e.message)}));case 5:n=e.sent,n.forEach((function(e){t.properties.push({name:e.data().name.toUpperCase(),id:e.id})})),t.$q.loading.hide();case 8:case"end":return e.stop()}}),e)})))()},showProperty:function(t){var e=this;return s()(i.a.mark((function n(){var a;return i.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.$q.loading.show(),e.units.length=0,n.next=4,at["a"].collection("utility_manager/".concat(e.user,"/properties/").concat(t,"/units")).get().catch((function(t){e.$q.loading.hide(),e.$q.notify(t.message),console.log(t.message)}));case 4:a=n.sent,a.forEach((function(t){e.units.push(t.data())})),e.$q.loading.hide();case 7:case"end":return n.stop()}}),n)})))()},editUnit:function(t){this.$q.loading.show(),this.$router.push({name:"editUnit",params:{unitId:t.unitId,propertyId:t.propertyId}})}}}),_t=kt,Ut=(n("de29"),n("ddd8")),$t=Object(w["a"])(_t,St,Nt,!1,null,"28995302",null),Pt=$t.exports;Q()($t,"components",{QSelect:Ut["a"],QList:R["a"],QItem:B["a"],QBtn:O["a"]});var Ct=function(){var t=this,e=this,n=e.$createElement,a=e._self._c||n;return a("q-page",{staticStyle:{"max-width":"600px",width:"90%",margin:"0 auto"},attrs:{padding:""}},[a("q-banner",{staticClass:"bg-black text-white text-center"},[a("div",{staticClass:"text-h5 text-weight-bold",staticStyle:{"letter-spacing":"2px","text-transform":"uppercase"}},[e._v("\n        Property Details\n     ")])]),a("q-list",{staticClass:"bg-grey-2",staticStyle:{padding:"10px 10px 20px 10px"}},[a("q-form",{ref:"propertyForm",on:{submit:function(t){return t.preventDefault(),t.stopPropagation(),e.saveProperty()}}},[a("q-item",[a("q-input",{staticStyle:{width:"100%","text-transform":"capitalize"},attrs:{outlined:"",hint:"Property Name",type:"text",rules:[function(t){return!!t||"* Required"},function(t){return t.length>=3||"Please use minimum 3 characters"},function(t){return t.length<=20||"Please use maximum 16 characters"},function(t){return e.checkProperty(t)||"Name already in use"}]},scopedSlots:e._u([{key:"before",fn:function(){return[a("q-icon",{staticStyle:{"font-size":"2rem",color:"black"},attrs:{name:"home"}})]},proxy:!0}]),model:{value:e.propertyName,callback:function(t){e.propertyName=t},expression:"propertyName"}})],1),a("br"),a("q-item",[a("q-input",{staticStyle:{width:"100%","text-transform":"capitalize"},attrs:{outlined:"",type:"text",hint:"Property Address",rules:[function(t){return!!t||"* Required"},function(t){return t.length>=3||"Please use minimum 3 characters"},function(t){return t.length<=20||"Please use maximum 20 characters"}]},scopedSlots:e._u([{key:"before",fn:function(){return[a("q-icon",{staticStyle:{"font-size":"2rem",color:"black"},attrs:{name:"mail"}})]},proxy:!0}]),model:{value:e.propertyAddress,callback:function(t){e.propertyAddress=t},expression:"propertyAddress"}})],1),a("br"),a("q-item",{staticClass:"row justify-around"},[a("q-btn",{staticStyle:{"word-spacing":"3px","letter-spacing":"1px"},attrs:{label:"add unit",color:"primary"},on:{click:function(t){e.addUnit=!0}}}),a("q-btn",{staticStyle:{"word-spacing":"3px","letter-spacing":"1px"},attrs:{label:"add water connection",color:"secondary"},on:{click:function(t){e.addWater=!0}}})],1),a("br"),e._l(e.units,(function(t,n){return a("q-list",{key:n,attrs:{"v-if":e.units.length>0}},[a("q-item",{staticClass:"row justify-between"},[a("q-input",{staticStyle:{width:"35%"},attrs:{outlined:"",hint:"Unit Name",type:"text",readonly:!0},scopedSlots:e._u([{key:"before",fn:function(){return[e._v(e._s(n+1)+")")]},proxy:!0}],null,!0),model:{value:t.name,callback:function(n){e.$set(t,"name",n)},expression:"unit.name"}}),a("div",{staticClass:"row items-center"},[a("q-icon",{staticStyle:{"margin-bottom":"18px"},attrs:{name:"all_inclusive"}})],1),a("q-input",{staticStyle:{width:"20%"},attrs:{outlined:"",hint:"Service Number",type:"text",readonly:!0},model:{value:t.uscn,callback:function(n){e.$set(t,"uscn",n)},expression:"unit.uscn"}}),a("div",{staticClass:"row content-center"},[a("q-btn",{staticStyle:{"margin-bottom":"18px"},on:{click:function(a){return e.deleteUnit(n,t.name)}}},[a("q-icon",{attrs:{name:"delete"}})],1)],1)],1)],1)})),a("br"),e._l(e.water,(function(t,n){return a("q-list",{key:n+"water",attrs:{"v-if":t.length>0}},[a("q-item",{staticClass:"row justify-between"},[a("q-input",{staticStyle:{width:"35%"},attrs:{outlined:"",hint:"Can Number",type:"text",readonly:!0},scopedSlots:e._u([{key:"before",fn:function(){return[e._v(e._s(n+1)+")")]},proxy:!0}],null,!0),model:{value:t.canNumber,callback:function(n){e.$set(t,"canNumber",n)},expression:"water.canNumber"}}),a("div",{staticClass:"row content-center"},[a("q-btn",{staticStyle:{"margin-bottom":"18px"},on:{click:function(a){return e.deleteWater(n,t.canNumber)}}},[a("q-icon",{attrs:{name:"delete"}})],1)],1)],1)],1)})),a("br"),a("div",{staticClass:"row justify-around"},[a("q-btn",{staticStyle:{width:"auto","font-size":"1rem","letter-spacing":"5px"},attrs:{color:"red",type:"submit"}},[e._v("Save Property")])],1)],2)],1),a("q-dialog",{on:{hide:e.onDialogHide},model:{value:e.addUnit,callback:function(t){e.addUnit=t},expression:"addUnit"}},[a("q-list",{staticClass:"bg-white",staticStyle:{width:"80%"}},[a("q-banner",{staticClass:"bg-black text-white text-center"},[a("div",{staticClass:"text-h5 text-weight-bold",staticStyle:{"letter-spacing":"2px","text-transform":"uppercase"}},[e._v("\n        Unit Details\n     ")])]),a("br"),a("q-form",{ref:"unitForm",on:{submit:function(t){return t.preventDefault(),t.stopPropagation(),e.saveUnit(e.unitName,e.unitUscn,e.tenantName)}}},[a("q-item",[a("q-input",{staticStyle:{width:"100%"},attrs:{outlined:"",hint:"Unit Name",type:"text",rules:[function(t){return!!t||"* Required"},function(t){return t.length>=3||"Please use minimum 3 characters"},function(t){return t.length<=20||"Please use maximum 20 characters"},function(e){return!t.units.some((function(t){return t.name===e}))||"Name already in use"}]},model:{value:e.unitName,callback:function(t){e.unitName=t},expression:"unitName"}})],1),a("q-item",[a("q-input",{staticStyle:{width:"100%"},attrs:{outlined:"",mask:"#########",hint:"Unique Service Number",type:"text",rules:[function(t){return!!t||"* Required"},function(t){return 9==t.length||"Please enter 9 digits Unique Service Number"},function(e){return!t.units.some((function(t){return t.uscn===e}))||"Service Number already in use"}]},model:{value:e.unitUscn,callback:function(t){e.unitUscn=t},expression:"unitUscn"}})],1),a("q-item",[a("q-input",{staticStyle:{width:"100%"},attrs:{outlined:"",hint:"Tenant Name (optional)",type:"text"},model:{value:e.tenantName,callback:function(t){e.tenantName=t},expression:"tenantName"}})],1),a("br"),a("q-item",{staticClass:"row justify-center"},[a("q-btn",{attrs:{label:"Save unit",type:"submit",color:"positive"}})],1),a("br")],1)],1)],1),a("q-dialog",{on:{hide:e.onDialogHide},model:{value:e.addWater,callback:function(t){e.addWater=t},expression:"addWater"}},[a("q-list",{staticClass:"bg-white",staticStyle:{width:"80%"}},[a("q-banner",{staticClass:"bg-black text-white text-center"},[a("div",{staticClass:"text-h5 text-weight-bold",staticStyle:{"letter-spacing":"1px","word-spacing":"3px","text-transform":"uppercase"}},[e._v("\n        WATER CONNECTION DETAILS\n     ")])]),a("br"),a("q-form",{ref:"waterForm",on:{submit:function(t){return t.preventDefault(),t.stopPropagation(),e.saveWater(e.canNumber)}}},[a("q-item",[a("q-input",{staticStyle:{width:"100%"},attrs:{outlined:"",mask:"#########",hint:"Can Number",type:"text",rules:[function(t){return!!t||"* Required"},function(t){return 9==t.length||"Please enter 9 digits Can Number"}]},model:{value:e.canNumber,callback:function(t){e.canNumber=t},expression:"canNumber"}})],1),a("br"),a("q-item",{staticClass:"row justify-center"},[a("q-btn",{attrs:{label:"add can number",type:"submit",color:"positive"}})],1),a("br")],1)],1)],1)],1)},It=[],Qt={data:function(){return{user:"",uscn:"",serviceno:"",propertyAddress:"",propertyName:"",units:[],water:[],canNumber:"",unitName:"",unitUscn:"",tenantName:"",addUnit:!1,addWater:!1,deleteDialog:!1,propertyNames:[]}},created:function(){var t=this;this.user=this.$q.localStorage.getItem("user"),at["a"].collection("utility_manager/".concat(this.user,"/properties")).get().then((function(e){e.docs.forEach((function(e){t.propertyNames.push({name:e.data().name,address:e.data().address})}))}))},methods:{saveUnit:function(t,e,n){this.units.push({name:t,uscn:e,tenantName:n}),this.addUnit=!1},saveWater:function(t){this.water.push({canNumber:t}),this.addWater=!1},checkProperty:function(t){var e=this.propertyNames.some((function(e){return e.name===t.toLowerCase()}));return!e},saveProperty:function(){var t=this;return s()(i.a.mark((function e(){var n;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$q.loading.show(),n=at["a"].collection("utility_manager/".concat(t.user,"/properties")),n.add({name:t.propertyName.toLowerCase().trim(),address:t.propertyAddress.toLowerCase().trim(),userId:t.user}).then((function(e){var n=at["a"].collection("utility_manager/".concat(t.user,"/properties/").concat(e.id,"/units")),a=at["a"].collection("utility_manager/".concat(t.user,"/properties/").concat(e.id,"/water"));t.units.forEach((function(a){n.add({unitName:a.name.toLowerCase().trim(),uscn:a.uscn.toLowerCase().trim(),tenantName:a.tenantName.toLowerCase().trim(),userId:"".concat(t.user),propertyId:e.id,propertyName:e.name,propertyAddress:e.address}).then((function(e){n.doc(e.id).update({unitId:e.id}),t.$q.loading.hide()})).catch((function(e){t.$q.loading.hide(),t.$q.notify({message:e,type:"negative"})}))})),t.water.forEach((function(n){a.add({canNumber:n.canNumber.trim(),userId:"".concat(t.user),propertyId:e.id}).then((function(e){a.doc(e.id).update({waterId:unitId.id}),t.$q.loading.hide()})).catch((function(e){t.$q.loading.hide(),t.$q.notify({message:e,type:"negative"})}))}))})).then((function(e){t.$q.dialog({message:"".concat(t.propertyName," added successfully"),color:"blue",persistent:!0}),t.$router.replace("/properties")})).catch((function(e){t.$q.notify({message:e})}));case 3:case"end":return e.stop()}}),e)})))()},deleteUnit:function(t,e){var n=this;this.$q.dialog({title:"Confirm",message:"Would you like to delete ".concat(e.toUpperCase(),"?"),cancel:!0,persistent:!0}).onOk((function(){n.units.splice(t,1)}))},deleteWater:function(t,e){var n=this;this.$q.dialog({title:"Confirm",message:"Would you like to delete ".concat(e,"?"),cancel:!0,persistent:!0}).onOk((function(){n.water.splice(t,1)}))},onDialogHide:function(){this.unitName="",this.unitUscn="",this.tenantName="",this.canNumber=""}}},Dt=Qt,Et=n("54e1"),jt=Object(w["a"])(Dt,Ct,It,!1,null,null,null),Ot=jt.exports;Q()(jt,"components",{QPage:ot["a"],QBanner:Et["a"],QList:R["a"],QForm:bt["a"],QItem:B["a"],QInput:lt["a"],QIcon:W["a"],QBtn:O["a"],QDialog:ct["a"]});var Lt=function(){var t=this,e=this,n=e.$createElement,a=e._self._c||n;return a("q-page",{staticStyle:{"max-width":"600px",width:"90%",margin:"0 auto"},attrs:{padding:""}},[a("q-list",{staticClass:"bg-white",staticStyle:{width:"80%"}},[a("q-banner",{staticClass:"bg-black text-white text-center"},[a("div",{staticClass:"text-h5 text-weight-bold",staticStyle:{"letter-spacing":"2px","text-transform":"uppercase"}},[e._v("Unit Details")])]),a("br"),a("q-form",{ref:"unitForm",on:{submit:function(t){return t.preventDefault(),t.stopPropagation(),e.saveUnit()}}},[a("q-item",[a("q-input",{staticStyle:{width:"100%","text-transform":"capitalize"},attrs:{outlined:"",hint:"Unit Name",type:"text",rules:[function(t){return!!t||"* Required"},function(t){return t.length>=3||"Please use minimum 3 characters"},function(t){return t.length<=20||"Please use maximum 16 characters"},function(e){return t.checkName(e)||"Name already in use"}]},model:{value:e.unit.unitName,callback:function(t){e.$set(e.unit,"unitName",t)},expression:"unit.unitName"}})],1),a("q-item",[a("q-input",{staticStyle:{width:"100%"},attrs:{outlined:"",mask:"#########",hint:"Unique Service Number",type:"text",rules:[function(t){return!!t||"* Required"},function(t){return 9==t.length||"Please enter 9 digits Unique Service Number"},function(e){return t.checkUscn(e)||"Service Number already in use"}]},model:{value:e.unit.uscn,callback:function(t){e.$set(e.unit,"uscn",t)},expression:"unit.uscn"}})],1),a("q-item",[a("q-input",{staticStyle:{width:"100%","text-transform":"capitalize"},attrs:{outlined:"",hint:"Tenant Name (optional)",type:"text"},model:{value:e.unit.tenantName,callback:function(t){e.$set(e.unit,"tenantName",t)},expression:"unit.tenantName"}})],1),a("q-item",[a("q-input",{staticStyle:{width:"100%","text-transform":"capitalize"},attrs:{outlined:"",readonly:!0,hint:"Property Name",type:"text"},model:{value:e.unit.propertyName,callback:function(t){e.$set(e.unit,"propertyName",t)},expression:"unit.propertyName"}})],1),a("br"),a("q-item",{staticClass:"row justify-between"},[a("q-btn",{attrs:{label:"Save unit",type:"submit",color:"positive"}}),a("q-btn",{attrs:{label:"Delete unit",color:"negative"},on:{click:function(t){return e.deleteUnit()}}})],1),a("br")],1)],1)],1)},zt=[],At=(n("6b54"),{props:["unitId","propertyId"],data:function(){return{user:"",unit:{},unitNames:[],unitUscns:[],tenantName:"",tempUnitName:"",tempUnitUscn:"",unitRef:""}},created:function(){var t=this;this.$q.loading.show(),this.user=this.$q.localStorage.getItem("user"),this.unitRef=at["a"].doc("utility_manager/".concat(this.user,"/properties/").concat(this.propertyId,"/units/").concat(this.unitId)),this.unitRef.get().then((function(e){t.unit=e.data(),t.tempUnitName=e.data().unitName,t.tempUnitUscn=e.data().uscn})).catch((function(e){t.$q.loading.hide(),t.$q.notify("Please select unit to display details"),t.$router.replace("/units")}));var e=at["a"].collection("utility_manager/".concat(this.user,"/properties/").concat(this.propertyId,"/units")).get();e.then((function(e){e.forEach((function(e){t.unitNames.push(e.data().unitName),t.unitUscns.push(e.data().uscn),t.$q.loading.hide()}))})).catch((function(e){t.$q.loading.hide(),t.$q.notify(e),console.log(e)}))},methods:{saveUnit:function(){var t=this;console.log("SAVE STARTED......"),this.$q.loading.show(),this.unitRef.update({unitName:this.unit.unitName,uscn:this.unit.uscn,tenantName:this.unit.tenantName}).then((function(e){t.$q.notify("".concat(t.unit.unitName," updated successfully")),t.$q.loading.hide(),t.$router.replace("/units")}))},checkName:function(t){if(t==this.tempUnitName)return!0;var e=this.unitNames.some((function(e){return e.toLowerCase().trim()===t.toLowerCase().trim()}));return!e},checkUscn:function(t){if(t==this.tempUnitUscn)return!0;var e=this.unitUscns.some((function(e){return e.toString().trim()==t.trim()}));return!e},deleteUnit:function(){var t=this;this.$q.dialog({title:"Confirm",message:"Would you like to delete ".concat(this.unit.unitName.toUpperCase()),cancel:!0,persistent:!0}).onOk((function(){t.$q.loading.show(),t.unitRef.delete().then((function(e){t.$q.notify("".concat(t.unit.unitName.toUpperCase()," deleted succesfully")),t.$q.loading.hide(),t.$router.replace("/units")})).catch((function(e){t.$q.loading.hide(),t.$q.notify(e.message)}))}))}}}),Rt=At,Bt=Object(w["a"])(Rt,Lt,zt,!1,null,null,null),Mt=Bt.exports;Q()(Bt,"components",{QPage:ot["a"],QList:R["a"],QBanner:Et["a"],QForm:bt["a"],QItem:B["a"],QInput:lt["a"],QBtn:O["a"]});var Wt=function(){var t=this,e=this,n=e.$createElement,a=e._self._c||n;return a("q-page",{staticStyle:{"max-width":"600px",width:"90%",margin:"0 auto"},attrs:{padding:""}},[a("div",{staticClass:"row justify-center"},[a("div",{staticClass:"col-4"},[e.showUnit?e._e():a("q-select",{attrs:{outlined:"",label:"Please Select Property",options:e.properties,"option-value":"id","option-label":"name","emit-value":"","map-options":""},on:{input:function(t){return e.addUnit(e.model)}},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}})],1)]),e.showUnit?a("q-list",{staticClass:"bg-white",staticStyle:{width:"80%"}},[a("q-banner",{staticClass:"bg-black text-white text-center"},[a("div",{staticClass:"text-h5 text-weight-bold",staticStyle:{"letter-spacing":"2px","text-transform":"uppercase"}},[e._v("Unit Details")])]),a("br"),a("q-form",{ref:"unitForm",on:{submit:function(t){return t.preventDefault(),t.stopPropagation(),e.saveUnit()}}},[a("q-item",[a("q-input",{staticStyle:{width:"100%","text-transform":"capitalize"},attrs:{outlined:"",hint:"Unit Name",type:"text",rules:[function(t){return!!t||"* Required"},function(t){return t.length>=3||"Please use minimum 3 characters"},function(t){return t.length<=20||"Please use maximum 16 characters"},function(e){return t.checkName(e)||"Name already in use"}]},model:{value:e.unit.unitName,callback:function(t){e.$set(e.unit,"unitName",t)},expression:"unit.unitName"}})],1),a("q-item",[a("q-input",{staticStyle:{width:"100%"},attrs:{outlined:"",mask:"#########",hint:"Unique Service Number",type:"text",rules:[function(t){return!!t||"* Required"},function(t){return 9==t.length||"Please enter 9 digits Unique Service Number"},function(e){return t.checkUscn(e)||"Service Number already in use"}]},model:{value:e.unit.uscn,callback:function(t){e.$set(e.unit,"uscn",t)},expression:"unit.uscn"}})],1),a("q-item",[a("q-input",{staticStyle:{width:"100%","text-transform":"capitalize"},attrs:{outlined:"",hint:"Tenant Name (optional)",type:"text"},model:{value:e.unit.tenantName,callback:function(t){e.$set(e.unit,"tenantName",t)},expression:"unit.tenantName"}})],1),a("q-item",[a("q-input",{staticStyle:{width:"100%","text-transform":"capitalize"},attrs:{outlined:"",readonly:!0,hint:"Property Name",type:"text"},model:{value:e.unit.propertyName,callback:function(t){e.$set(e.unit,"propertyName",t)},expression:"unit.propertyName"}})],1),a("br"),a("q-item",{staticClass:"row justify-center"},[a("q-btn",{attrs:{label:"Save unit",type:"submit",color:"positive"}})],1),a("br")],1)],1):e._e()],1)},Tt=[],Ft=(n("7514"),{data:function(){return{model:null,properties:[],units:[],user:"",unit:{},unitNames:[],unitUscns:[],tenantName:"",tempUnitName:"",tempUnitUscn:"",showUnit:!1}},created:function(){this.onInit()},methods:{onInit:function(){var t=this;return s()(i.a.mark((function e(){var n;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$q.loading.show(),t.properties.length=0,t.user=t.$q.localStorage.getItem("user"),e.next=5,at["a"].collection("utility_manager/".concat(t.user,"/properties")).get().catch((function(e){t.$q.loading.hide(),t.$q.notify(e.message),console.log(e.message)}));case 5:n=e.sent,n.forEach((function(e){t.properties.push({name:e.data().name.toUpperCase(),id:e.id})})),t.$q.loading.hide();case 8:case"end":return e.stop()}}),e)})))()},addUnit:function(t){var e=this;return s()(i.a.mark((function n(){var a,r;return i.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.$q.loading.show(),e.units.length=0,a=e.properties.find((function(e){return e.id==t})),n.next=5,at["a"].collection("utility_manager/".concat(e.user,"/properties/").concat(t,"/units")).get().catch((function(t){e.$q.loading.hide(),e.$q.notify(t.message),console.log(t.message)}));case 5:r=n.sent,r.forEach((function(t){e.units.push(t.data())})),e.unit.propertyName=a.name,e.unit.propertyId=t,e.unit.userId=e.user,e.showUnit=!0,e.$q.loading.hide();case 12:case"end":return n.stop()}}),n)})))()},saveUnit:function(){var t=this;console.log(this.unit),this.$q.loading.show();var e=at["a"].collection("utility_manager/".concat(this.user,"/properties/").concat(this.unit.propertyId,"/units"));e.add({unitName:this.unit.unitName,uscn:this.unit.uscn,tenantName:this.unit.tenantName,propertyId:this.unit.propertyId,propertyName:this.unit.propertyName,userId:this.user}).then((function(t){e.doc(t.id).update({unitId:t.id})})).then((function(e){t.$router.replace("/units"),t.$q.notify("".concat(t.unit.unitName.toUpperCase()," added successfully")),t.$q.loading.hide()})).catch((function(e){t.$q.loading.hide(),console.log(e)}))},checkName:function(t){if(t==this.tempUnitName)return!0;var e=this.unitNames.some((function(e){return e.toLowerCase().trim()===t.toLowerCase().trim()}));return!e},checkUscn:function(t){if(t==this.tempUnitUscn)return!0;var e=this.unitUscns.some((function(e){return e.toString().trim()==t.trim()}));return!e}}}),Ht=Ft,Vt=Object(w["a"])(Ht,Wt,Tt,!1,null,null,null),Yt=Vt.exports;Q()(Vt,"components",{QPage:ot["a"],QSelect:Ut["a"],QList:R["a"],QBanner:Et["a"],QForm:bt["a"],QItem:B["a"],QInput:lt["a"],QBtn:O["a"]});var Jt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-page",{staticClass:"fit row  justify-center items-center content-center"},[n("div",{staticStyle:{width:"80vw","max-width":"500px"}},[n("div",{staticClass:"banner"},[t._v("\n    Utility Manager\n  ")]),n("q-form",{staticClass:"q-gutter-md",on:{submit:t.onSubmit}},[n("q-input",{attrs:{filled:"",label:"Email","lazy-rules":"",rules:[function(t){return!!t||"* Required"},function(t){return t&&t.length>3||"Please use atleast 4 characters"}]},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),n("br"),n("q-input",{attrs:{filled:"",type:"password",label:"Password",hint:"Enter your secret password","lazy-rules":"",rules:[function(t){return null!==t&&""!==t||"Please type a password"},function(t){return t.length>=6||"Please use atleast 6 characters"}]},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),n("br"),n("div",{staticClass:"row justify-around"},[n("q-btn",{staticClass:"bg-black text-white",attrs:{label:"Login",type:"submit"}}),n("q-btn",{staticClass:"bg-black text-white",attrs:{label:"Register",to:"/register"}})],1)],1)],1)])},Kt=[],Xt={name:"Login",data:function(){return{username:"",password:""}},methods:{onSubmit:function(){var t=this;U.a.auth().signInWithEmailAndPassword(this.username,this.password).then((function(e){t.setStorage().then((function(){t.$q.loading.hide(),t.$router.replace("/")})),t.$q.notify({message:"".concat(e.user.displayName," logged in successfully!"),type:"positive",timeout:1e3}),t.$q.localStorage.set("user",e.user.uid)})).catch((function(e){var n=e.message;t.$q.loading.hide(),t.$q.notify({message:"".concat(n),type:"negative"})}))},setStorage:function(){var t=this;return s()(i.a.mark((function e(){return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$q.localStorage.set("isLoggedIn",!0),console.log("User name set"),e.abrupt("return",!0);case 3:case"end":return e.stop()}}),e)})))()}}},Zt=Xt,Gt=(n("1139"),Object(w["a"])(Zt,Jt,Kt,!1,null,null,null)),te=Gt.exports;Q()(Gt,"components",{QPage:ot["a"],QForm:bt["a"],QInput:lt["a"],QBtn:O["a"]});var ee=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-page",{staticClass:"fit row  justify-center items-center content-center"},[n("div",{staticStyle:{width:"80vw","max-width":"500px"}},[n("q-form",{staticClass:"q-gutter-md",on:{submit:t.onSubmit}},[n("q-input",{attrs:{filled:"",label:"Username","lazy-rules":"",rules:[function(t){return!!t||"* Required"},function(t){return t&&t.length>3||"Please use atleast 4 characters"}]},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),n("br"),n("q-input",{attrs:{filled:"",label:"Email","lazy-rules":"",rules:[function(t){return!!t||"* Required"},function(e){return t.validateEmail(e)||"Please enter a valid email address"}]},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),n("br"),n("q-input",{attrs:{filled:"",type:"password",label:"Password","lazy-rules":"",rules:[function(t){return null!==t&&""!==t||"Please type a password"},function(t){return t.length>=6||"Please use atleast 6 characters"}]},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),n("br"),n("div",{staticClass:"row justify-center"},[n("q-btn",{staticClass:"bg-black text-white",attrs:{label:"Submit",type:"submit"}})],1)],1)],1)])},ne=[],ae={name:"Register",data:function(){return{username:"",password:"",email:""}},methods:{onSubmit:function(){var t=this;U.a.auth().createUserWithEmailAndPassword(this.email,this.password).then((function(e){var n=U.a.auth().currentUser;t.$q.localStorage.set("isLoggedIn",!0),t.$q.localStorage.set("user",n.uid),at["a"].collection("utility_manager").doc(n.uid).set({name:t.username}),n.updateProfile({displayName:t.username}).then((function(){t.$q.notify({message:"".concat(t.username," registered successfully!"),type:"positive"}),t.$q.loading.hide(),t.$router.push("/login")}))})).catch((function(e){var n=e.message;t.$q.notify({message:"".concat(n),type:"negative"}),t.$q.loading.hide()}))},validateEmail:function(t){return!!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(t)}}},ie=ae,re=Object(w["a"])(ie,ee,ne,!1,null,null,null),se=re.exports;Q()(re,"components",{QPage:ot["a"],QForm:bt["a"],QInput:lt["a"],QBtn:O["a"]});var oe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-page",{attrs:{padding:""}})},ce=[],le={},ue=le,pe=Object(w["a"])(ue,oe,ce,!1,null,null,null),de=pe.exports;Q()(pe,"components",{QPage:ot["a"]});var me=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-page",{attrs:{padding:""}})},fe=[],he={},ye=he,ge=Object(w["a"])(ye,me,fe,!1,null,null,null),ve=ge.exports;Q()(ge,"components",{QPage:ot["a"]});var be=[{path:"/",component:Y,children:[{path:"",component:pt,meta:{title:"Bills Manager"}},{name:"bills",path:"/bills",component:pt,meta:{title:"Bills Manager"}},{name:"properties",path:"/properties",component:xt,meta:{title:"All Properties",buttons:{icon:"add_box",path:"/addProperty"}}},{name:"water",path:"/water",component:de,meta:{title:"Water Connections",buttons:{icon:"add_box",path:"/addWater"}}},{name:"units",path:"/units",component:Pt,meta:{title:"All Units",buttons:{icon:"add_box",path:"/addUnit"}}},{name:"editUnit",path:"/editUnit",props:!0,component:Mt,meta:{title:"Edit Unit",buttons:{label:"Cancel",path:"/units"}}},{name:"addUnit",path:"/addUnit",props:!0,component:Yt,meta:{title:"Add New Unit",buttons:{label:"Cancel",path:"/units"}}},{name:"addProperty",path:"/addProperty",component:Ot,meta:{title:"Add New Property",buttons:{label:"Cancel",path:"/Properties"}}},{name:"addWater",path:"/addWater",component:ve,meta:{title:"Add New Connection",buttons:{label:"Cancel",path:"/Water"}}}]},{path:"/login",component:tt,children:[{path:"/login",component:te},{path:"/register",component:se}]}];be.push({path:"*",component:function(){return n.e(2).then(n.bind(null,"e51e"))}});var we=be;o["a"].use(S["a"]);var qe=function(){var t=new S["a"]({scrollBehavior:function(){return{x:0,y:0}},routes:we,mode:"hash",base:""}),e=["/login","/register"];return t.beforeEach((function(t,n,a){var i=d["a"].getItem("isLoggedIn");if(e.includes(t.path))a();else if(i)a();else{var r={title:"You are logged Out!",message:"Please sign in to continue...",preventClose:!0};h["a"].create(r),a("/login")}})),t},xe=function(){return Se.apply(this,arguments)};function Se(){return Se=s()(i.a.mark((function t(){var e,n;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("function"!==typeof qe){t.next=6;break}return t.next=3,qe({Vue:o["a"]});case 3:t.t0=t.sent,t.next=7;break;case 6:t.t0=qe;case 7:return e=t.t0,n={el:"#q-app",router:e,render:function(t){return t(x)}},t.abrupt("return",{app:n,router:e});case 10:case"end":return t.stop()}}),t)}))),Se.apply(this,arguments)}var Ne=n("9483");function ke(){return _e.apply(this,arguments)}function _e(){return _e=s()(i.a.mark((function t(){var e,n;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,xe();case 2:e=t.sent,n=e.app,e.router,new o["a"](n);case 6:case"end":return t.stop()}}),t)}))),_e.apply(this,arguments)}Object(Ne["a"])("service-worker.js",{ready:function(){},registered:function(){},cached:function(){},updatefound:function(){},updated:function(){},offline:function(){},error:function(){}}),/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&window.navigator.standalone&&n.e(0).then(n.t.bind(null,"a0db",7)),ke()},"59cd":function(t,e,n){},"7e01":function(t,e,n){"use strict";var a=n("f889"),i=n.n(a);i.a},"9ad7":function(t,e,n){},a6e2:function(t,e,n){"use strict";var a=n("59cd"),i=n.n(a);i.a},de29:function(t,e,n){"use strict";var a=n("9ad7"),i=n.n(a);i.a},f889:function(t,e,n){}});